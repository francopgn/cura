<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema C.U.R.A. | Nivel 2 (Demo Aleatoria)</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        medical: {
                            primary: '#004E85',
                            light: '#E6F0F5',
                            alert: '#FEFCE8',
                            alertText: '#854D0E'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

<style>
body {
    -webkit-font-smoothing: antialiased;
    background-color: #F3F4F6;
}
.card-shadow {
    box-shadow: 0 1px 3px rgba(0,0,0,0.05), 0 1px 2px rgba(0,0,0,0.03);
}

/* POPUP */
.popup {
    position: fixed;
    top: 20px;
    right: 20px;
    background-color: #004E85;
    color: #fff;
    padding: 15px 20px;
    border-radius: 10px;
    font-size: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.6s ease;
    z-index: 9999;
    max-width: 280px;
}
.popup.show { opacity: 1; }
</style>

</head>

<body class="min-h-screen flex flex-col pt-28 sm:pt-24 font-sans">

<div id="popup" class="popup">
  <p>Todos los datos e imágenes aquí proporcionados son ficticios.</p>
</div>

<header class="fixed top-0 left-0 w-full bg-medical-primary text-white shadow-md z-50">
    <div class="w-full px-4 py-2 flex flex-row items-center justify-between gap-2">
        
        <div class="flex items-center gap-3 min-w-0">
            <img src="/logo_cura.png" class="h-12 sm:h-16 w-auto object-contain">
            <div class="leading-tight">
                <h1 class="text-[11px] sm:text-sm font-bold uppercase tracking-wide">
                    SISTEMA DE SALUD DIGITAL C.U.R.A.
                </h1>
                <p class="text-[10px] sm:text-[11px] opacity-80 tracking-wider hidden sm:block">
                    NIVEL DE ACCESO 2 (URGENCIAS) · DEMO ALEATORIA
                </p>
                 <p class="text-[9px] opacity-80 tracking-wider sm:hidden">
                    ACCESO NIVEL 2
                </p>
            </div>
        </div>

        <button onclick="window.location.reload()" 
                class="bg-white text-medical-primary hover:bg-gray-100 transition-colors px-3 py-1.5 rounded flex items-center gap-2 shadow-sm flex-shrink-0 mx-2 cursor-pointer active:scale-95 transform transition-transform">
            <img src="/random/refresh.png" class="w-3 h-3 sm:w-4 sm:h-4 object-contain">
            <span class="text-[10px] sm:text-xs font-bold uppercase tracking-wide leading-none">Ver otro ejemplo</span>
        </button>

        <div class="flex flex-col items-end leading-tight min-w-0 w-auto flex-shrink">
            <span id="random-medico"
                class="text-[9px] sm:text-[11px] font-medium tracking-wider opacity-90 text-right leading-tight">
            </span>

            <span id="hora-acceso"
                class="text-[9px] sm:text-[11px] tracking-wider opacity-80 text-right leading-tight hidden sm:block">
            </span>
        </div>
    </div>
</header>

<main class="max-w-lg mx-auto px-4 sm:px-6 py-4 space-y-4">

    <section class="bg-white rounded-lg card-shadow border border-gray-200 p-4 relative overflow-hidden">
        <div class="absolute left-0 top-0 bottom-0 w-1 bg-medical-primary"></div>

        <div class="flex items-start gap-4">
            <div class="w-16 h-16 rounded-full bg-gray-200 border-2 border-medical-light overflow-hidden flex-shrink-0">
                <img id="foto-paciente" src="" class="w-full h-full object-cover">
            </div>

            <div class="flex-grow">
                <h2 id="nombre-completo" class="text-lg font-bold text-gray-900 leading-tight">
                    PACIENTE DEMO
                </h2>

                <div class="mt-1 space-y-0.5">
                    <p class="text-sm text-gray-600 font-medium">D.N.I.: <span id="dni"></span></p>
                    <p class="text-sm text-gray-600 font-medium">
                        NAC.: <span id="fecha-nac"></span> (<span id="edad"></span> AÑOS)
                    </p>
                    <p class="text-sm text-gray-600 font-medium">
                        TIPO DE SANGRE: <span id="tipo-sangre" class="font-bold text-medical-primary"></span>
                    </p>
                </div>
            </div>
        </div>

        <div class="mt-4 pt-3 border-t border-gray-100">
            <button type="button"
                class="w-full border border-medical-primary text-medical-primary bg-white font-semibold py-2.5 px-4 rounded flex items-center justify-center gap-2 cursor-default">
                <i class="ph-fill ph-phone-outgoing text-lg"></i>
                Llamar Contacto de Emergencia 
            </button>
        </div>
    </section>
        <section class="bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg p-4 flex gap-3 shadow-sm">
        <i class="ph-fill ph-warning text-yellow-600 text-2xl mt-0.5"></i>
        <div>
            <h3 class="text-yellow-800 font-bold text-sm uppercase mb-1">Advertencias Críticas</h3>
            <ul id="lista-advertencias" class="text-sm text-yellow-900 space-y-1 font-medium leading-snug"></ul>
        </div>
    </section>

    <section>
        <h3 class="text-xs font-bold text-gray-500 uppercase mb-2">Condiciones Clínicas Relevantes</h3>
        <div id="lista-condiciones" class="grid grid-cols-1 gap-2"></div>
    </section>

    <section>
        <h3 class="text-xs font-bold text-gray-500 uppercase mb-2">Implantes / Operaciones</h3>
        <div id="lista-implantes" class="space-y-2"></div>
    </section>

    <section>
        <h3 class="text-xs font-bold text-gray-500 uppercase mb-2">Medicación Actual</h3>
        <div class="bg-white border rounded card-shadow overflow-hidden">
            <ul id="lista-medicacion" class="divide-y divide-gray-100"></ul>
        </div>
    </section>

    <div class="h-4"></div>
</main>

<footer class="mt-auto bg-white border-t text-center py-6">
    <div class="flex flex-col items-center gap-3">
        <div class="w-50 h-12 opacity-90">
            <img src="https://datos.salud.gob.ar/user_images/logo_nuevo_msal_encabezado%202.jpg"
                 class="w-full h-full object-contain grayscale hover:grayscale-0 transition-all">
        </div>
        <p class="text-xs font-bold text-gray-500 uppercase">Sistema C.U.R.A.</p>
        <p class="text-[10px] text-gray-400">Acceso Seguro Nivel 2 · Datos aleatorios de demostración</p>
    </div>
</footer>

<script>
/* FUNCIONES RANDOM */
function randInt(min, max){return Math.floor(Math.random()*(max-min+1))+min;}
function choice(arr){return arr[randInt(0, arr.length-1)];}
function fechaRandom(){
    const y = randInt(1940, 2010);
    const m = randInt(1,12);
    const d = randInt(1, [4,6,9,11].includes(m)?30:(m===2?28:31));
    return {d,m,y};
}
function formatear(d,m,y){return d.toString().padStart(2,'0')+'/'+m.toString().padStart(2,'0')+'/'+y;}
function edad(d,m,y){
    const n=new Date(y,m-1,d),h=new Date();let e=h.getFullYear()-n.getFullYear();
    if(h.getMonth()<n.getMonth()||(h.getMonth()===n.getMonth()&&h.getDate()<n.getDate()))e--;
    return e;
}

/* LISTAS */
const nombresM=['Franco','Juan','Lucas','Santiago','Matías','Agustín','Iván','Tomás','Bruno','Ezequiel'];
const nombresF=['Sofía','Camila','Valentina','Julieta','Martina','Ana','Paula','Rocío','Florencia','Lorena'];
const apellidos=['Gómez','Rodríguez','Paganini','Fernández','López','Sánchez','Romero','Martínez','García','Argüello'];
const sangres=['O+','A+','B+','AB+','O-','A-','B-','AB-'];

const medicos = [
    "Dr. Fabián Alonso","Dra. Julieta Ruiz","Dr. Mauro Etcheverry",
    "Dra. Florencia Rivas","Dr. Sebastián López","Dra. Ana Beltrán"
];

/* CATÁLOGOS */
const condicionesCatalogo = [
    {titulo:'Diabetes tipo 2', subt:'Control con hipoglucemiantes',
     adv:['Riesgo de hipoglucemia','Controlar glucemia si está consciente'],
     meds:[['Metformina 850 mg','Hipoglucemiante'],['Insulina NPH','Insulina']]
    },
    {titulo:'Hipertensión arterial',subt:'En tratamiento',
     adv:['Controlar presión al ingreso','Evitar descensos bruscos'],
     meds:[['Enalapril 10 mg','IECA'],['Amlodipina 5 mg','Calcioantagonista']]
    },
    {titulo:'Asma bronquial',subt:'Leve–moderado',
     adv:['Consultar uso de broncodilatadores'],
     meds:[['Salbutamol inhalador','Broncodilatador']]
    },
    {titulo:'Ansiedad generalizada',subt:'Tratamiento psiquiátrico',
     adv:['Posible somnolencia por medicación'],
     meds:[['Sertralina 100 mg','ISRS']]
    }
];

const implantes = [
    {t:'Placa PHILOS 3,5 mm',d:'Osteosíntesis húmero proximal derecho',a:'Verificar compatibilidad con RM.'},
    {t:'Stent coronario',d:'Antecedente coronario',a:'Paciente anticoagulado.'},
    {t:'Prótesis total de rodilla',d:'Artrosis severa',a:'Evitar torsión brusca.'}
];

/* GENERACIÓN */
document.addEventListener("DOMContentLoaded",()=>{

    /* FECHA + HORA */
    const a=new Date();
    let f=a.toLocaleDateString('es-AR',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
    const map={enero:"ene",febrero:"feb",marzo:"mar",abril:"abr",mayo:"may",junio:"jun",julio:"jul",agosto:"ago",septiembre:"sep",octubre:"oct",noviembre:"nov",diciembre:"dic"};
    for(const k in map){if(f.includes(k))f=f.replace(k,map[k]);}
    f=f.charAt(0).toUpperCase()+f.slice(1);
    const h=a.toLocaleTimeString('es-AR',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
    document.getElementById("hora-acceso").innerHTML=f+"<br>"+h+"<br>Acceso registrado.";

    /* MÉDICO RANDOM */
    const medico = choice(medicos);
    const mp = randInt(10000, 99999);
    const mn = randInt(100000, 999999);

    document.getElementById("random-medico").innerHTML =
        `${medico}<br>M.P.: ${mp} · M.N.: ${mn}`;

    /* PACIENTE */
    const sexo=Math.random()<0.5?'M':'F';
    const nombre=sexo==='M'?choice(nombresM):choice(nombresF);
    const apellido=choice(apellidos);
    document.getElementById("nombre-completo").textContent=nombre+" "+apellido;

    document.getElementById("foto-paciente").src=
        "https://randomuser.me/api/portraits/"+(sexo==='M'?'men/':'women/')+randInt(1,99)+".jpg";

    const dni=randInt(15000000,50000000);
    document.getElementById("dni").textContent=dni.toLocaleString('es-AR');

    const fn=fechaRandom();
    document.getElementById("fecha-nac").textContent=formatear(fn.d,fn.m,fn.y);
    document.getElementById("edad").textContent=edad(fn.d,fn.m,fn.y);

    document.getElementById("tipo-sangre").textContent=choice(sangres);

    /* CONDICIONES ALEATORIAS */
    const cantCond=randInt(1,3);
    const usadas=[];
    const cont=document.getElementById("lista-condiciones");

    for(let i=0;i<cantCond;i++){
        const c=choice(condicionesCatalogo);
        if(usadas.includes(c)) continue;
        usadas.push(c);

        cont.innerHTML+=`
        <div class="bg-white border rounded p-3 flex gap-3 card-shadow">
            <div class="w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center">
                <i class="ph-fill ph-heartbeat text-lg"></i>
            </div>
            <div>
                <p class="text-sm font-bold text-gray-800">${c.titulo}</p>
                <p class="text-xs text-gray-500">${c.subt}</p>
            </div>
        </div>`;
    }

    /* IMPLANTES */
    const cantImpl=randInt(0,2);
    const implC=document.getElementById("lista-implantes");

    if(cantImpl===0){
        implC.innerHTML=`<p class="text-xs text-gray-500 italic">Sin implantes registrados.</p>`;
    } else {
        for(let i=0;i<cantImpl;i++){
            const im=choice(implantes);
            implC.innerHTML+=`
            <div class="bg-white border rounded card-shadow">
                <div class="p-3 flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center">
                        <i class="ph ph-first-aid text-lg"></i>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-800">${im.t}</p>
                        <p class="text-xs text-gray-500">${im.d}</p>
                        <p class="text-[11px] text-gray-400 mt-1">${im.a}</p>
                    </div>
                </div>
            </div>`;
        }
    }

    /* ADVERTENCIAS */
    const adv=[];
    usadas.forEach(c=>adv.push(...c.adv));
    if(cantImpl>0){implantes.forEach(i=>adv.push(i.a));}

    const advC=document.getElementById("lista-advertencias");
    adv.forEach(a=>{
        advC.innerHTML+=`<li>• ${a}</li>`;
    });

    /* MEDICACIÓN */
    const meds=document.getElementById("lista-medicacion");
    usadas.forEach(c=>{
        c.meds.forEach(m=>{
            meds.innerHTML+=`
            <li class="p-3 flex justify-between items-center">
                <span class="text-sm font-medium">${m[0]}</span>
                <span class="text-xs bg-gray-100 px-2 py-1 rounded">${m[1]}</span>
            </li>`;
        });
    });

    /* POPUP */
    const popup=document.getElementById("popup");
    popup.classList.add("show");
    setTimeout(()=>popup.classList.remove("show"),6000);
});
</script>

</body>
</html>


