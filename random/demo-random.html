<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <title>Sistema C.U.R.A. | Nivel 2 (Urgencias)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        medical: {
                            primary: '#004E85',
                            primaryDark: '#00345C',
                            light: '#E6F0F5',
                            accent: '#00C2FF'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            -webkit-font-smoothing: antialiased;
            background-color: #f0f4f8;
        }
        .cura-card {
            background: #ffffff;
            border-radius: 28px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
        }
        .popup {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #004E85;
            color: #fff;
            padding: 12px 20px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 600;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.6s ease;
            z-index: 9999;
            text-align: center;
            width: 90%;
            max-width: 350px;
        }
        .popup.show { opacity: 1; }
    </style>
</head>

<body class="min-h-screen flex flex-col pt-24 font-sans">

<div id="popup" class="popup">
  ðŸš¨ SimulaciÃ³n: Acceso de Emergencia (Nivel 2)
</div>

<header class="fixed top-0 left-0 w-full bg-medical-primaryDark text-white shadow-lg z-50">
    <div class="max-w-xl mx-auto px-4 py-3 flex items-center justify-between gap-2">
        <div class="flex items-center gap-3 min-w-0">
            <img src="/logo_cura.png" class="h-10 w-auto">
            <div class="leading-tight">
                <h1 class="text-[10px] font-extrabold uppercase tracking-widest text-medical-accent">C.U.R.A.</h1>
                <p class="text-[9px] opacity-80 font-bold uppercase">Nivel 2 (Urgencias)</p>
            </div>
        </div>
        <div class="flex flex-col items-end leading-tight min-w-0 flex-shrink">
            <span id="random-medico" class="text-[9px] font-bold opacity-90 uppercase text-right"></span>
            <span id="hora-acceso" class="text-[8px] opacity-70 uppercase text-right tracking-tighter mt-1"></span>
        </div>
    </div>
</header>

<main class="w-full max-w-lg mx-auto px-5 py-6 space-y-5">

    <div class="pb-2">
        <button onclick="window.location.reload()" 
                class="w-full bg-white text-medical-primary hover:bg-gray-100 px-4 py-3 rounded-2xl flex items-center justify-center gap-3 shadow-sm border border-gray-200 active:scale-95 transition-all">
            <i class="ph-bold ph-arrows-clockwise text-lg"></i>
            <span class="text-xs font-bold uppercase tracking-wide">Ver otro ejemplo aleatorio</span>
        </button>
    </div>

    <section class="cura-card p-6 relative overflow-hidden">
        <div class="absolute left-0 top-0 bottom-0 w-1.5 bg-medical-primary"></div>
        
        <div class="flex items-center gap-5">
            <div class="relative flex-shrink-0">
                <div class="w-20 h-20 rounded-full bg-gray-100 border-4 border-medical-light overflow-hidden shadow-sm">
                    <img id="foto-paciente" src="" class="w-full h-full object-cover">
                </div>
                <div id="tipo-sangre" class="absolute -bottom-1 -right-1 flex items-center justify-center w-8 h-8 rounded-full bg-medical-primary text-white text-[11px] font-black border-2 border-white shadow-md">
                    --
                </div>
            </div>

            <div class="flex-grow">
                <h2 id="nombre-completo" class="text-xl font-extrabold text-gray-900 leading-none mb-2 uppercase tracking-tight"></h2>
                <div class="space-y-1">
                    <p class="text-xs font-bold text-gray-500 uppercase">D.N.I.: <span id="dni" class="text-gray-900"></span></p>
                    <p class="text-xs font-bold text-gray-500 uppercase">Nac: <span id="fecha-nac" class="text-gray-900"></span> (<span id="edad" class="text-gray-900"></span> aÃ±os)</p>
                </div>
            </div>
        </div>

        <div class="mt-6 pt-5 border-t border-gray-100">
            <button type="button"
                class="w-full bg-medical-primary text-white font-bold py-4 px-6 rounded-2xl flex items-center justify-center gap-3 shadow-lg active:scale-95 transition-all">
                <i class="ph-fill ph-phone-outgoing text-xl"></i>
                <span class="tracking-wide">LLAMAR CONTACTO DE EMERGENCIA</span>
            </button>
        </div>
    </section>

    <section class="bg-orange-50 border-2 border-orange-100 rounded-[28px] p-6 shadow-sm">
        <div class="flex items-center gap-3 mb-3">
            <div class="w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center">
                <i class="ph-fill ph-warning-octagon text-lg"></i>
            </div>
            <h3 class="text-orange-900 font-black text-xs uppercase tracking-widest text-center">Advertencias CrÃ­ticas</h3>
        </div>
        <ul id="lista-advertencias" class="text-xs text-orange-900 space-y-2 font-bold leading-relaxed"></ul>
    </section>

    <section class="space-y-3">
        <h3 class="text-[11px] font-black text-gray-400 uppercase tracking-widest px-2">Condiciones ClÃ­nicas Relevantes</h3>
        <div id="lista-condiciones" class="grid grid-cols-1 gap-3"></div>
    </section>

    <section class="space-y-3">
        <h3 class="text-[11px] font-black text-gray-400 uppercase tracking-widest px-2">Implantes / Operaciones</h3>
        <div id="lista-implantes" class="space-y-3"></div>
    </section>

    <section class="space-y-3">
        <h3 class="text-[11px] font-black text-gray-400 uppercase tracking-widest px-2">MedicaciÃ³n Actual</h3>
        <div class="cura-card overflow-hidden">
            <ul id="lista-medicacion" class="divide-y divide-gray-100"></ul>
        </div>
    </section>

</main>

<footer class="mt-auto bg-white border-t border-gray-100 py-10">
    <div class="flex flex-col items-center gap-3 text-center px-6">
        <img src="https://datos.salud.gob.ar/user_images/logo_nuevo_msal_encabezado%202.jpg" class="h-8 grayscale opacity-50">
        <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Sistema C.U.R.A. Â· 2026</p>
    </div>
</footer>

<script>
function randInt(min, max){return Math.floor(Math.random()*(max-min+1))+min;}
function choice(arr){return arr[randInt(0, arr.length-1)];}
function fechaRandom(){
    const y = randInt(1940, 2010);
    const m = randInt(1,12);
    const d = randInt(1, [4,6,9,11].includes(m)?30:(m===2?28:31));
    return {d,m,y};
}
function formatear(d,m,y){return d.toString().padStart(2,'0')+'/'+m.toString().padStart(2,'0')+'/'+y;}
function edad(d,m,y){
    const n=new Date(y,m-1,d),h=new Date();let e=h.getFullYear()-n.getFullYear();
    if(h.getMonth()<n.getMonth()||(h.getMonth()===n.getMonth()&&h.getDate()<n.getDate()))e--;
    return e;
}

const nombresM=['Franco','Juan','Lucas','Santiago','MatÃ­as','AgustÃ­n','IvÃ¡n','TomÃ¡s','Bruno','Ezequiel'];
const nombresF=['SofÃ­a','Camila','Valentina','Julieta','Martina','Ana','Paula','RocÃ­o','Florencia','Lorena'];
const apellidos=['GÃ³mez','RodrÃ­guez','Paganini','FernÃ¡ndez','LÃ³pez','SÃ¡nchez','Romero','MartÃ­nez','GarcÃ­a','ArgÃ¼ello'];
const sangres=['O+','A+','B+','AB+','O-','A-','B-','AB-'];
const medicos = ["Dr. FabiÃ¡n Alonso","Dra. Julieta Ruiz","Dr. Mauro Etcheverry","Dra. Florencia Rivas","Dr. SebastiÃ¡n LÃ³pez","Dra. Ana BeltrÃ¡n"];

const condicionesCatalogo = [
    {titulo:'Diabetes tipo 2', subt:'Control con hipoglucemiantes', adv:['Riesgo de hipoglucemia','Controlar glucemia si estÃ¡ inconsciente'], meds:[['Metformina 850 mg','Hipoglucemiante'],['Insulina NPH','Insulina']]},
    {titulo:'HipertensiÃ³n arterial',subt:'En tratamiento', adv:['Controlar presiÃ³n al ingreso','Evitar descensos bruscos'], meds:[['Enalapril 10 mg','IECA'],['Amlodipina 5 mg','Calcioantagonista']]},
    {titulo:'Asma bronquial',subt:'Leveâ€“moderado', adv:['Consultar uso de broncodilatadores'], meds:[['Salbutamol 100 mcg','Broncodilatador']]},
    {titulo:'Ansiedad generalizada',subt:'Tratamiento psiquiÃ¡trico', adv:['Posible somnolencia por medicaciÃ³n'], meds:[['Sertralina 100 mg','ISRS']]}
];

const implantes = [
    {t:'Placa PHILOS 3,5 mm',d:'OsteosÃ­ntesis hÃºmero proximal derecho',a:'Verificar compatibilidad con RM.'},
    {t:'Stent coronario',d:'Antecedente coronario',a:'Paciente anticoagulado.'},
    {t:'PrÃ³tesis total de rodilla',d:'Artrosis severa',a:'Evitar torsiÃ³n brusca.'}
];

document.addEventListener("DOMContentLoaded",()=>{
    /* FECHA + HORA + ACCESO REGISTRADO */
    const a=new Date();
    let f=a.toLocaleDateString('es-AR',{weekday:'short',day:'2-digit',month:'short'}).toUpperCase();
    const h=a.toLocaleTimeString('es-AR',{hour:'2-digit',minute:'2-digit'});
    document.getElementById("hora-acceso").innerHTML = `${f} Â· ${h}<br>ACCESO REGISTRADO`;

    /* MÃ‰DICO RANDOM */
    const medico = choice(medicos);
    const mp = randInt(10000, 99999);
    document.getElementById("random-medico").innerHTML = `${medico}<br>M.P.: ${mp}`;

    /* PACIENTE */
    const sexo=Math.random()<0.5?'M':'F';
    const nombre=sexo==='M'?choice(nombresM):choice(nombresF);
    const apellido=choice(apellidos);
    document.getElementById("nombre-completo").textContent=nombre+" "+apellido;
    document.getElementById("foto-paciente").src="https://randomuser.me/api/portraits/"+(sexo==='M'?'men/':'women/')+randInt(1,99)+".jpg";

    const dni=randInt(15000000,50000000);
    document.getElementById("dni").textContent=dni.toLocaleString('es-AR');
    const fn=fechaRandom();
    document.getElementById("fecha-nac").textContent=formatear(fn.d,fn.m,fn.y);
    document.getElementById("edad").textContent=edad(fn.d,fn.m,fn.y);
    document.getElementById("tipo-sangre").textContent=choice(sangres);

    /* CONDICIONES */
    const cantCond=randInt(1,2);
    const usadas=[];
    const cont=document.getElementById("lista-condiciones");

    for(let i=0;i<cantCond;i++){
        const c=choice(condicionesCatalogo);
        if(usadas.includes(c)) continue;
        usadas.push(c);
        cont.innerHTML+=`
        <div class="cura-card p-4 flex gap-4">
            <div class="w-10 h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center flex-shrink-0">
                <i class="ph-fill ph-heartbeat text-xl"></i>
            </div>
            <div>
                <p class="text-sm font-bold text-gray-800">${c.titulo}</p>
                <p class="text-[11px] font-medium text-gray-500">${c.subt}</p>
            </div>
        </div>`;
    }

    /* IMPLANTES */
    const cantImpl=randInt(0,1);
    const implC=document.getElementById("lista-implantes");
    if(cantImpl===0) implC.innerHTML=`<p class="text-xs text-gray-400 italic px-2">Sin implantes registrados.</p>`;
    else {
        const im=choice(implantes);
        implC.innerHTML=`
        <div class="cura-card p-4 flex gap-4">
            <div class="w-10 h-10 rounded-xl bg-indigo-100 text-indigo-600 flex items-center justify-center flex-shrink-0">
                <i class="ph-fill ph-bone text-xl"></i>
            </div>
            <div>
                <p class="text-sm font-bold text-gray-800">${im.t}</p>
                <p class="text-[11px] font-medium text-gray-500">${im.d}</p>
            </div>
        </div>`;
    }

    /* ADVERTENCIAS */
    const adv=[];
    usadas.forEach(c=>adv.push(...c.adv));
    if(cantImpl>0){adv.push(choice(implantes).a);}
    const advC=document.getElementById("lista-advertencias");
    adv.forEach(a=>{ advC.innerHTML+=`<li>â€¢ ${a}</li>`; });

    /* MEDICACIÃ“N (Se mantienen nombres y dosis juntos) */
    const meds=document.getElementById("lista-medicacion");
    usadas.forEach(c=>{
        c.meds.forEach(m=>{
            meds.innerHTML+=`
            <li class="p-4 flex justify-between items-center">
                <span class="text-sm font-bold text-medical-primary">${m[0]}</span>
                <span class="text-[10px] font-black bg-gray-100 px-2 py-1 rounded-lg uppercase text-gray-500">${m[1]}</span>
            </li>`;
        });
    });

    /* POPUP */
    const popup=document.getElementById("popup");
    setTimeout(()=>popup.classList.add("show"), 500);
    setTimeout(()=>popup.classList.remove("show"), 4000);
});
</script>

</body>
</html>
